-- SoulMatch Migration
-- version: 16.0
-- Adds a 'card_data' column to the messages table to support rich, structured content like event/place share cards.

ALTER TABLE public.messages
ADD COLUMN IF NOT EXISTS card_data jsonb;

-- The existing RLS policies for the 'messages' table are sufficient,
-- as the INSERT CHECK condition is only on the 'sender_id' column.
-- Users who can insert messages into a thread will be able to write to this new column.
